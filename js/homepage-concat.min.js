if(window.clUnsupportedBrowser)throw"unsupported browser";jQuery.fn.initMenu=function(){return this.each(function(){$(".acitem",this).hide(),$("li.expand > .acitem",this).show().prev().addClass("active"),$("li h5",this).on("click",function(){var e=$(this).next(),t=this.parentNode.parentNode;return $(t).hasClass("noaccordion")?(void 0===e[0]&&(window.location.href=this.href),$(e).slideToggle("normal",function(){var e=$(this);e.is(":visible")?e.prev().addClass("active"):e.prev().removeClass("active")}),!1):e.hasClass("acitem")&&e.is(":visible")?($(t).hasClass("collapsible")&&$(".acitem:visible",t).first().slideUp("normal",function(){$(this).prev().removeClass("active")}),!1):e.hasClass("acitem")&&!e.is(":visible")?($(".acitem:visible",t).slideUp("normal",function(){$(this).prev().removeClass("active")}),e.slideDown("normal",function(){$(this).prev().addClass("active")}),!1):void 0})})},function(){var t,a,n,e=$("#rightbar");e.find("h5").addClass("hot").end().find(".more").remove().end().find("li").addClass("s").end().initMenu(),$("#chlang").on("change",function(){window.location.href=this.value}),CL.page.isMobile&&(t=$(".cal"),m=$("#calban"),a=$("#center"),n=$("#topban").find(".mobile-menu-button"),e.find(".expand h5").trigger("click"),["sss","jjj","hhh","ppp","ccc","bbb","ggg","rrr"].forEach(function(e){var t=function(e){var t={},a=$("#"+e),n=a.find(".ban a"),i=n.clone().html(n.data("alltitle")).wrapAll("<li></li>").parent(),n=a;a.find("li").each(function(){t[$(this).find("a").html()]=this});var r=Object.keys(t).sort();if(r.length){for(;"["===r[0].charAt(0);)r.push(r.shift());(r=r.map(function(e){return t[e]})).unshift(i[0]),n.find(".cats").html($('<ul id="'+e+'0"></ul>').html(r))}return n}(e);$("#"+e).remove(),a.append(t)}),e=[$(".community"),$(".jobs"),m[0],t[0]].filter(function(e){return e}),$.each(e,function(e,t){a.append(t)}),m.addClass("ban").on("click","a",function(e){e.preventDefault(),t.toggleClass("active-cal")}),$(".ban").filter(function(){return $(this).siblings(".cats").children().length}).on("click",function(e){var t=$(this);if("forums"!==t.parent().attr("id")){if(e.preventDefault(),t.hasClass("disabled"))return n.trigger("click"),!1;t.siblings(".cats").toggleClass("active-category")}}),a.append($(".leftlinks").show()),$("body").trigger("mobilePageReady"));var i=$("#query"),r=$("input#postal")[0],l=$("input#search_distance")[0],o=$("input#ordinal")[0],s=$("input#ratio")[0],c=$("input#clicked")[0];CL.autocomplete({type:"search-count",url:"/count-search",buildParams:function(e){e={query:e.term};return r&&(e.postal=r.value),l&&(e.search_distance=l.value),e.ordinal=o.value,e.ratio=s.value,e.clicked=c.value,e},onSuccess:function(i,r){1<(e=Object.keys(i.fetched).map(function(e){var t=0,a=i.fetched[e];Object.keys(a).forEach(function(e){t+=a[e]});var n=window.categoryNames[e];return{label:"<b>"+t+"</b> &ldquo;"+r+"&rdquo; in "+n,value:r,cat:e,total:t}}).sort(function(e,t){return e.total<t.total?1:-1})).length?s.value=Math.round(e[0].total/e[1].total):s.value=1;var t=1,e=e.map(function(e){return e.ordinal=t++,e}),a=(i.remembered||[]).map(function(e){var t=e.cat,a=window.categoryNames[t];return{label:"<b>"+cl.util.escapeHtml(e.term)+"</b> in "+a+'<span class="remove">&times;</span>',value:e.term,cat:t,itemToForget:e}});return 0<e.length&&$("#catAbb").val(e[0].cat),0<e.length&&0<a.length?e.push({label:'<hr class="ui-autocomplete-divider">',value:""}):0===e.length&&0===a.length&&e.push({label:window.noResults+" <b>"+CL.util.escapeHtml(r)+"</b>",value:r}),e.concat(a)},onSelect:function(e,t,a,n){t=t.item;t.value===n(i.val())?(a({term:t.value,cat:t.cat}),$("#catAbb").val(t.cat)):$("#catAbb").val(""),o.value=t.ordinal,13==e.keyCode?c.value=0:c.value=1,$("#search").submit()},remember:!0}),""!==i.val()&&i.trigger("focus");var u,d,f,h,p,m=CL.url.params();("US"===window.areaCountry||null===window.areaCountry&&m.postal)&&(CL.autocomplete({type:"subarea",buildParams:function(e){return{term:e.term}},onSelect:function(e,t){f="custom",p(t.item)},autocomplete:{autoFocus:!0}}),u=$("#topban"),m=$(".regular-area"),d=$(".custom-area"),f="",h=function(e){u.removeClass(["regular","custom","enter"].join(" ")).addClass(e),"enter"===e&&setTimeout(function(){$(".subarea-input").focus().select()},1)},m.find(".area").on("click",function(e){f="regular",e.preventDefault(),h("enter")}),d.find(".area, .radius-info").on("click",function(e){f="custom",e.preventDefault(),h("enter")}),$(".subarea-input").on("blur",function(){h(f)}).on("keydown",function(e){27===Number(e.which)&&$(this).blur()}),$(".exit-subarea").on("click",function(){p(null)}),p=function(e){var t,a=CL.url.params(window.location.search);e?(Object.assign(a,{search_distance:e.radius,postal:e.postal}),t=e.url,d.removeClass("no-name").find(".area").text(e.label).end().find(".postal").text(e.postal).end().find(".distance").text(e.radius),h("custom")):(delete a.postal,delete a.search_distance,t=window.location.hostname,h("regular")),window.location.href="//"+t+"?"+Object.keys(a).map(function(e){return e+"="+a[e]}).join("&")})}();
/* {"sources":{"homepage-concat.js":"e7fd6263ac329a7f14492a1b8b53de75"}} */